syntax = "proto3";

option csharp_namespace = "Dolittle.Runtime.Events.Relativity";

package relativity;

service QuantumTunnelService {
    rpc Open(OpenTunnelMessage) returns (stream EventParticleMessage) {}
}

message EventParticleSubscriptionMessage {
    string  event = 1;
    int64   offset = 2;
}

message OpenTunnelMessage {
    string application = 1;
    repeated string applicationLocation = 2;
    repeated EventParticleSubscriptionMessage   subscriptions = 3;
}

message EventParticleMessage {
    bytes id = 1;
    bytes metadata = 2;
    bytes event = 3;
    int64 commit = 4;
}